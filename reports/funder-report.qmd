---
title: "R-Ladies Annual Impact Report"
subtitle: "Community Growth and Achievements"
date: "`r Sys.Date()`"
author: "R-Ladies Global"
slug: funder-report
categories:
  - reports
  - annual
  
tags:
  - impact
  - funders
  - metrics
draft: false
---

```{r}
#| label: setup
#| include: false
source(here::here("reports/_common.R"))
```

## Executive Summary

This annual report demonstrates the impact and reach of R-Ladies Global, highlighting community growth, event activity, and geographic expansion over the past year.

```{r}
#| label: annual-metrics
# Define reporting period (last 12 months)
report_end <- Sys.Date()
report_start <- report_end - years(1)
previous_start <- report_start - years(1)
previous_end <- report_start

# Prepare events data
events_analyzed <- events |>
  filter(!type %in% c("cancelled", "CANCELLED")) |>
  mutate(
    event_date = as.Date(date),
    year = year(event_date),
    is_virtual = str_detect(tolower(location %||% ""), "online|virtual|zoom|meet|not announced")
  )

# Current reporting period
current_events <- events_analyzed |>
  filter(event_date >= report_start, event_date < report_end)

# Previous period for comparison
previous_events <- events_analyzed |>
  filter(event_date >= previous_start, event_date < previous_end)

# Active chapters (hosted at least one event in period)
active_chapters_current <- n_distinct(current_events$group_urlname)
active_chapters_previous <- n_distinct(previous_events$group_urlname)

# Total chapters
total_chapters <- n_distinct(chapters$urlname)

# Event counts
total_events_current <- nrow(current_events)
total_events_previous <- nrow(previous_events)

# Calculate growth rates
chapter_growth <- round((active_chapters_current - active_chapters_previous) / active_chapters_previous * 100, 1)
event_growth <- round((total_events_current - total_events_previous) / total_events_previous * 100, 1)

# Virtual vs in-person
virtual_count <- sum(current_events$is_virtual, na.rm = TRUE)
inperson_count <- sum(!current_events$is_virtual, na.rm = TRUE)
```

### Key Achievements (`r format(report_start, "%B %Y")` - `r format(report_end, "%B %Y")`)

- **`r format(total_events_current, big.mark = ",")`** events hosted (`r if_else(event_growth >= 0, paste0("+", event_growth), as.character(event_growth))`% vs. previous year)  
- **`r active_chapters_current`** active chapters (`r if_else(chapter_growth >= 0, paste0("+", chapter_growth), as.character(chapter_growth))`% vs. previous year)  
- **`r total_chapters`** total chapters worldwide  
- **`r format(virtual_count, big.mark = ",")`** virtual events ensuring global accessibility  
- **`r format(inperson_count, big.mark = ",")`** in-person events fostering local community  

## Community Growth

### Chapter Network Expansion

```{r}
#| label: chapter-growth
#| fig-cap: "Growth in active chapters over time"

# Calculate active chapters by quarter over last 3 years
chapter_activity <- events_analyzed |>
  filter(event_date >= Sys.Date() - years(3)) |>
  mutate(
    quarter = floor_date(event_date, "quarter"),
    quarter_label = paste0(year(quarter), " Q", quarter(quarter))
  ) |>
  group_by(quarter, quarter_label) |>
  summarise(
    active_chapters = n_distinct(group_urlname),
    .groups = "drop"
  )

ggplot(chapter_activity, aes(x = quarter, y = active_chapters)) +
  geom_line(color = rladies_colors$purple, linewidth = 1.2) +
  geom_point(color = rladies_colors$purple, size = 3) +
  geom_smooth(
    method = "loess",
    se = TRUE,
    alpha = 0.2,
    color = rladies_colors$dark_purple
  ) +
  labs(
    title = "Active Chapters Over Time",
    subtitle = "Chapters hosting at least one event per quarter",
    x = "Quarter",
    y = "Number of Active Chapters"
  ) +
  scale_x_date(date_labels = "%Y Q%q", date_breaks = "3 months") +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

### Geographic Reach

```{r}
#| label: geographic-reach
#| fig-cap: "Event distribution by region"

# Extract country from location (last part after comma)
regional_events <- current_events |>
  filter(!is.na(location)) |>
  mutate(
    # Extract country code (last 2 characters after last comma)
    country_code = str_extract(location, "[A-Z]{2}$"),
    region = case_when(
      country_code %in% c("US", "CA", "MX") ~ "North America",
      country_code %in% c("BR", "AR", "CL", "CO", "PE", "UY", "EC", "BO", "VE") ~ "Latin America",
      country_code %in% c("GB", "FR", "DE", "ES", "IT", "NL", "BE", "CH", "AT", "IE", 
                          "PT", "SE", "NO", "DK", "FI", "PL", "CZ", "GR", "TR") ~ "Europe",
      country_code %in% c("AU", "NZ") ~ "Oceania",
      country_code %in% c("CN", "JP", "KR", "IN", "SG", "TH", "MY", "ID", "PH", "TW") ~ "Asia",
      country_code %in% c("ZA", "KE", "NG", "EG", "MA") ~ "Africa",
      is_virtual ~ "Virtual (Global)",
      TRUE ~ "Other"
    )
  ) |>
  count(region, sort = TRUE)

ggplot(regional_events, aes(x = n, y = reorder(region, n))) +
  geom_col(fill = rladies_colors$purple) +
  geom_text(
    aes(label = sprintf("%d (%.1f%%)", n, n/sum(n)*100)),
    hjust = -0.1,
    size = 3.5
  ) +
  labs(
    title = "Events by Region",
    subtitle = paste("Reporting period:", format(report_start, "%b %Y"), "-", format(report_end, "%b %Y")),
    x = "Number of Events",
    y = NULL
  ) +
  scale_x_continuous(expand = expansion(mult = c(0, 0.15)))
```

```{r}
#| label: regional-summary
#| include: false

regions_served <- sum(regional_events$n[regional_events$region != "Virtual (Global)"] > 0)
continents <- regional_events |> 
  filter(region != "Virtual (Global)", region != "Other") |> 
  nrow()
```

R-Ladies events reached **`r continents`** major geographic regions with **`r format(sum(regional_events$n), big.mark = ",")`** total events.

## Event Activity and Impact

### Event Volume Trends

```{r}
#| label: event-trends
#| fig-cap: "Monthly event activity"

monthly_events <- events_analyzed |>
  filter(event_date >= Sys.Date() - years(2)) |>
  mutate(month = floor_date(event_date, "month")) |>
  count(month)

ggplot(monthly_events, aes(x = month, y = n)) +
  geom_col(fill = rladies_colors$purple) +
  geom_smooth(
    method = "loess",
    se = TRUE,
    alpha = 0.2,
    color = rladies_colors$dark_purple,
    linewidth = 1
  ) +
  labs(
    title = "Monthly Event Activity",
    subtitle = "Last 24 months with trend line",
    x = "Month",
    y = "Number of Events"
  ) +
  scale_x_date(date_labels = "%b %Y", date_breaks = "3 months") +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

### Event Format Evolution

```{r}
#| label: format-evolution
#| fig-cap: "Virtual vs in-person event distribution over time"

format_trends <- events_analyzed |>
  filter(event_date >= Sys.Date() - years(2)) |>
  mutate(
    quarter = floor_date(event_date, "quarter"),
    quarter_label = paste0(year(quarter), " Q", quarter(quarter)),
    format = if_else(is_virtual, "Virtual", "In-Person")
  ) |>
  count(quarter, quarter_label, format) |>
  group_by(quarter) |>
  mutate(percentage = n / sum(n) * 100)

ggplot(format_trends, aes(x = quarter, y = n, fill = format)) +
  geom_col(position = "stack") +
  scale_fill_manual(
    values = c(
      "Virtual" = rladies_colors$purple,
      "In-Person" = rladies_colors$light_purple
    )
  ) +
  labs(
    title = "Event Format Distribution",
    subtitle = "Quarterly breakdown of virtual and in-person events",
    x = "Quarter",
    y = "Number of Events",
    fill = "Format"
  ) +
  scale_x_date(date_labels = "%Y Q%q", date_breaks = "3 months") +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

Virtual events comprise **`r round(virtual_count / total_events_current * 100, 1)`%** of all events, ensuring accessibility for members regardless of location or mobility constraints.

## Community Engagement

### Most Active Chapters

```{r}
#| label: top-chapters
#| fig-cap: "Top 20 chapters by event count"

top_chapters <- current_events |>
  count(group_urlname, sort = TRUE) |>
  slice_head(n = 20)

ggplot(top_chapters, aes(x = n, y = reorder(group_urlname, n))) +
  geom_col(fill = rladies_colors$purple) +
  geom_text(
    aes(label = n),
    hjust = -0.2,
    size = 3
  ) +
  labs(
    title = "Most Active Chapters",
    subtitle = paste("Top 20 chapters:", format(report_start, "%b %Y"), "-", format(report_end, "%b %Y")),
    x = "Number of Events",
    y = NULL
  ) +
  scale_x_continuous(expand = expansion(mult = c(0, 0.15)))
```

### Chapter Health and Sustainability

```{r}
#| label: chapter-health
#| fig-cap: "Chapter activity distribution"

chapter_health <- current_events |>
  count(group_urlname, name = "events") |>
  mutate(
    activity_level = case_when(
      events >= 12 ~ "Very Active (12+ events)",
      events >= 6 ~ "Active (6-11 events)",
      events >= 3 ~ "Moderate (3-5 events)",
      TRUE ~ "New/Emerging (1-2 events)"
    ),
    activity_level = factor(
      activity_level,
      levels = c("Very Active (12+ events)", "Active (6-11 events)", 
                 "Moderate (3-5 events)", "New/Emerging (1-2 events)")
    )
  ) |>
  count(activity_level)

ggplot(chapter_health, aes(x = activity_level, y = n)) +
  geom_col(fill = rladies_colors$purple) +
  geom_text(
    aes(label = sprintf("%d\n(%.1f%%)", n, n/sum(n)*100)),
    vjust = -0.3,
    size = 3.5
  ) +
  labs(
    title = "Chapter Activity Distribution",
    x = "Activity Level",
    y = "Number of Chapters"
  ) +
  scale_y_continuous(expand = expansion(mult = c(0, 0.15))) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

```{r}
#| label: health-metrics
#| include: false

very_active <- chapter_health |> 
  filter(activity_level == "Very Active (12+ events)") |> 
  pull(n)
active_plus <- chapter_health |> 
  filter(activity_level %in% c("Very Active (12+ events)", "Active (6-11 events)")) |> 
  summarise(n = sum(n)) |> 
  pull(n)
```

**`r very_active`** chapters hosted 12+ events (monthly or more frequent), demonstrating strong community engagement.
**`r active_plus`** chapters maintained regular programming with 6+ events throughout the year.

## Looking Forward

### Strategic Priorities

Based on this year's data and community feedback, our priorities for the coming year include:

1. **Chapter Support**: Provide resources and mentorship to chapters in the "Moderate" category to increase activity  
2. **Geographic Expansion**: Focus outreach in underserved regions, particularly Africa and Asia  
3. **Sustainability**: Develop leadership succession planning for very active chapters  
4. **Accessibility**: Maintain strong virtual programming while supporting return to in-person events  
5. **Network Effects**: Facilitate cross-chapter collaborations and speaker sharing  

### Goals for Next Year

- Increase active chapters by 15-20%  
- Expand presence in underrepresented regions  

## Financial Stewardship

Funding received this year has directly supported:

- **Infrastructure**: Meetup.com platform costs for `r total_chapters` chapters  
- **Programming**: Virtual event platform licenses and technical support  
- **Outreach**: Marketing materials and promotional campaigns  
- **Development**: Website maintenance and community tools  
- **Training**: Organizer resources and leadership development  

All funds are used exclusively for community benefit, with volunteer leadership ensuring efficient resource allocation.

## Acknowledgments

This impact was made possible by:

- **`r active_chapters_current`** chapter organizing teams  
- Hundreds of volunteer speakers and workshop leaders  
- Our dedicated global leadership team  
- Technical contributors to R-Ladies infrastructure  
- Our generous funders and sponsors  

Thank you for supporting R-Ladies Global in promoting gender diversity in the R community.

---

*Report period: `r format(report_start, "%B %d, %Y")` - `r format(report_end, "%B %d, %Y")`*  
*Report generated: `r format(Sys.time(), "%Y-%m-%d %H:%M %Z")`*  
*Data source: R-Ladies Meetup Archive*
